import store from "../store"

export let data_data = {
    "page": 1,
    "results": [
        {
            "adult": false,
            "backdrop_path": "/uBHeAB2Ug9ELBzkMyls8CUjzn4i.jpg",
            "genre_ids": [
                28,
                878,
                53
            ],
            "id": 64635,
            "original_language": "en",
            "original_title": "Total Recall",
            "overview": "Factory worker Doug Quaid takes a virtual mind-trip vacation with the Rekall company, opting for implanted memories of being a spy. When the procedure goes wrong, Quaid becomes a wanted man by the police and joins forces with a rebel fighter to stop the evil Chancellor Cohaagen.",
            "popularity": 316.467,
            "poster_path": "/4M5urSlUyR2PtVBIoW9hLG9NQCQ.jpg",
            "release_date": "2012-08-02",
            "title": "Total Recall",
            "video": false,
            "vote_average": 6,
            "vote_count": 5308
        },
        {
            "adult": false,
            "backdrop_path": "/c9VuAhIVz51NJnQnkdj8TDwFcTz.jpg",
            "genre_ids": [
                18,
                53,
                28,
                12
            ],
            "id": 75174,
            "original_language": "en",
            "original_title": "The Grey",
            "overview": "Following a grueling five-week shift at an Alaskan oil refinery, workers led by sharpshooter John Ottway are flying home for a much-needed vacation. But a brutal storm causes their plane to crash in the frozen wilderness, and only eight men, including Ottway, survive. As they trek southward toward civilization and safety, Ottway and his companions must battle mortal injuries, the icy elements, and a pack of hungry wolves.",
            "popularity": 245.072,
            "poster_path": "/a0Vt3wx8ciKmPt4iXPx9sH4HBVU.jpg",
            "release_date": "2012-01-26",
            "title": "The Grey",
            "video": false,
            "vote_average": 6.564,
            "vote_count": 3709
        },
        {
            "adult": false,
            "backdrop_path": "/vMDdWQuvOjg9yUjMJrNunXq9cmw.jpg",
            "genre_ids": [
                878,
                12,
                9648
            ],
            "id": 70981,
            "original_language": "en",
            "original_title": "Prometheus",
            "overview": "A team of explorers discover a clue to the origins of mankind on Earth, leading them on a journey to the darkest corners of the universe. There, they must fight a terrifying battle to save the future of the human race.",
            "popularity": 217.419,
            "poster_path": "/m7nZCtHJyDLncBUarfM5h5mrppx.jpg",
            "release_date": "2012-05-30",
            "title": "Prometheus",
            "video": false,
            "vote_average": 6.55,
            "vote_count": 11739
        },
        {
            "adult": false,
            "backdrop_path": "/w6Fs4bIje1naeILo9KwAc1Y6bvP.jpg",
            "genre_ids": [
                18,
                37
            ],
            "id": 68718,
            "original_language": "en",
            "original_title": "Django Unchained",
            "overview": "With the help of a German bounty hunter, a freed slave sets out to rescue his wife from a brutal Mississippi plantation owner.",
            "popularity": 180.378,
            "poster_path": "/bV0rWoiRo7pHUTQkh6Oio6irlXO.jpg",
            "release_date": "2012-12-25",
            "title": "Django Unchained",
            "video": false,
            "vote_average": 8.179,
            "vote_count": 25596
        },
        {
            "adult": false,
            "backdrop_path": "/9BBTo63ANSmhC4e6r62OJFuK2GL.jpg",
            "genre_ids": [
                878,
                28,
                12
            ],
            "id": 24428,
            "original_language": "en",
            "original_title": "The Avengers",
            "overview": "When an unexpected enemy emerges and threatens global safety and security, Nick Fury, director of the international peacekeeping agency known as S.H.I.E.L.D., finds himself in need of a team to pull the world back from the brink of disaster. Spanning the globe, a daring recruitment effort begins!",
            "popularity": 171.827,
            "poster_path": "/RYMX2wcKCBAr24UyPD7xwmjaTn.jpg",
            "release_date": "2012-04-25",
            "title": "The Avengers",
            "video": false,
            "vote_average": 7.714,
            "vote_count": 30052
        },
        {
            "adult": false,
            "backdrop_path": "/a2n6bKD7qhCPCAEALgsAhWOAQcc.jpg",
            "genre_ids": [
                878,
                53,
                18
            ],
            "id": 49047,
            "original_language": "en",
            "original_title": "Gravity",
            "overview": "Dr. Ryan Stone, a brilliant medical engineer on her first Shuttle mission, with veteran astronaut Matt Kowalsky in command of his last flight before retiring. But on a seemingly routine spacewalk, disaster strikes. The Shuttle is destroyed, leaving Stone and Kowalsky completely alone-tethered to nothing but each other and spiraling out into the blackness of space. The deafening silence tells them they have lost any link to Earth and any chance for rescue. As fear turns to panic, every gulp of air eats away at what little oxygen is left. But the only way home may be to go further out into the terrifying expanse of space.",
            "popularity": 342.278,
            "poster_path": "/kZ2nZw8D681aphje8NJi8EfbL1U.jpg",
            "release_date": "2013-10-03",
            "title": "Gravity",
            "video": false,
            "vote_average": 7.165,
            "vote_count": 14945
        },
        {
            "adult": false,
            "backdrop_path": "/aFTYFqrWp4RS46Twm87l5e0ItYb.jpg",
            "genre_ids": [
                28,
                12,
                878
            ],
            "id": 68721,
            "original_language": "en",
            "original_title": "Iron Man 3",
            "overview": "When Tony Stark's world is torn apart by a formidable terrorist called the Mandarin, he starts an odyssey of rebuilding and retribution.",
            "popularity": 249.71,
            "poster_path": "/qhPtAc1TKbMPqNvcdXSOn9Bn7hZ.jpg",
            "release_date": "2013-04-18",
            "title": "Iron Man 3",
            "video": false,
            "vote_average": 6.928,
            "vote_count": 21698
        },
        {
            "adult": false,
            "backdrop_path": "/sPPsR9f4K0movWVQ99u4uMqFzEL.jpg",
            "genre_ids": [
                10749,
                878,
                18
            ],
            "id": 152601,
            "original_language": "en",
            "original_title": "Her",
            "overview": "In the not so distant future, Theodore, a lonely writer, purchases a newly developed operating system designed to meet the user's every need. To Theodore's surprise, a romantic relationship develops between him and his operating system. This unconventional love story blends science fiction and romance in a sweet tale that explores the nature of love and the ways that technology isolates and connects us all.",
            "popularity": 164.908,
            "poster_path": "/lEIaL12hSkqqe83kgADkbUqEnvk.jpg",
            "release_date": "2013-12-18",
            "title": "Her",
            "video": false,
            "vote_average": 7.857,
            "vote_count": 13903
        },
        {
            "adult": false,
            "backdrop_path": "/6QOZ7RGucRJLGvm7TH5k2BN0xSp.jpg",
            "genre_ids": [
                18,
                10402
            ],
            "id": 86829,
            "original_language": "en",
            "original_title": "Inside Llewyn Davis",
            "overview": "In Greenwich Village in the early 1960s, gifted but volatile folk musician Llewyn Davis struggles with money, relationships, and his uncertain future.",
            "popularity": 163.125,
            "poster_path": "/nNxK3pC3DMpPpWKMvo2p3liREVT.jpg",
            "release_date": "2013-10-18",
            "title": "Inside Llewyn Davis",
            "video": false,
            "vote_average": 7.2,
            "vote_count": 2601
        },
        {
            "adult": false,
            "backdrop_path": "/6RDgtEBzjuF7W25DVziXRABchpX.jpg",
            "genre_ids": [
                27
            ],
            "id": 109428,
            "original_language": "en",
            "original_title": "Evil Dead",
            "overview": "Mia, a drug addict, is determined to kick the habit. To that end, she asks her brother, David, his girlfriend, Natalie and their friends Olivia and Eric to accompany her to their family's remote forest cabin to help her through withdrawal. Eric finds a mysterious Book of the Dead at the cabin and reads aloud from it, awakening an ancient demon. All hell breaks loose when the malevolent entity possesses Mia.",
            "popularity": 158.33,
            "poster_path": "/1gDV0Lm9y8ufIKzyf0h0GBgb9Zj.jpg",
            "release_date": "2013-04-05",
            "title": "Evil Dead",
            "video": false,
            "vote_average": 6.538,
            "vote_count": 4421
        },
        {
            "adult": false,
            "backdrop_path": "/kjTGuAeMsTTRxiHFSzj2T1zyUwH.jpg",
            "genre_ids": [
                35
            ],
            "id": 87818,
            "original_language": "en",
            "original_title": "Movie 43",
            "overview": "Fifteen directors and an all-star cast created this twisted comedy that follows three teens on the hunt for the world's most banned film.",
            "popularity": 130.536,
            "poster_path": "/uYa06GxHsCsELx9vOQ11vsT0Aa6.jpg",
            "release_date": "2013-01-24",
            "title": "Movie 43",
            "video": false,
            "vote_average": 4.581,
            "vote_count": 2223
        },
        {
            "adult": false,
            "backdrop_path": "/aQCCpAIdWAp6wyFgjMry4okwrZo.jpg",
            "genre_ids": [
                27,
                53
            ],
            "id": 138843,
            "original_language": "en",
            "original_title": "The Conjuring",
            "overview": "Paranormal investigators Ed and Lorraine Warren work to help a family terrorized by a dark presence in their farmhouse. Forced to confront a powerful entity, the Warrens find themselves caught in the most terrifying case of their lives.",
            "popularity": 129.917,
            "poster_path": "/wVYREutTvI2tmxr6ujrHT704wGF.jpg",
            "release_date": "2013-07-18",
            "title": "The Conjuring",
            "video": false,
            "vote_average": 7.54,
            "vote_count": 11143
        },
        {
            "adult": false,
            "backdrop_path": "/4TFCA5Lm5miseV3Wy02yxurEQL9.jpg",
            "genre_ids": [
                878,
                28,
                18,
                53
            ],
            "id": 119450,
            "original_language": "en",
            "original_title": "Dawn of the Planet of the Apes",
            "overview": "A group of scientists in San Francisco struggle to stay alive in the aftermath of a plague that is wiping out humanity, while Caesar tries to maintain dominance over his community of intelligent apes.",
            "popularity": 480.661,
            "poster_path": "/kScdQEwS9jPEdnO23XjGAtaoRcT.jpg",
            "release_date": "2014-07-08",
            "title": "Dawn of the Planet of the Apes",
            "video": false,
            "vote_average": 7.319,
            "vote_count": 10946
        },
        {
            "adult": false,
            "backdrop_path": "/xJHokMbljvjADYdit5fK5VQsXEG.jpg",
            "genre_ids": [
                12,
                18,
                878
            ],
            "id": 157336,
            "original_language": "en",
            "original_title": "Interstellar",
            "overview": "The adventures of a group of explorers who make use of a newly discovered wormhole to surpass the limitations on human space travel and conquer the vast distances involved in an interstellar voyage.",
            "popularity": 375.745,
            "poster_path": "/gEU2QniE6E77NI6lCU6MxlNBvIx.jpg",
            "release_date": "2014-11-05",
            "title": "Interstellar",
            "video": false,
            "vote_average": 8.434,
            "vote_count": 34397
        },
        {
            "adult": false,
            "backdrop_path": "/vNXGrknx4GjWLgmuNTftWZluIUl.jpg",
            "genre_ids": [
                18,
                10402
            ],
            "id": 244786,
            "original_language": "en",
            "original_title": "Whiplash",
            "overview": "Under the direction of a ruthless instructor, a talented young drummer begins to pursue perfection at any cost, even his humanity.",
            "popularity": 197.984,
            "poster_path": "/7fn624j5lj3xTme2SgiLCeuedmO.jpg",
            "release_date": "2014-10-10",
            "title": "Whiplash",
            "video": false,
            "vote_average": 8.381,
            "vote_count": 14634
        },
        {
            "adult": false,
            "backdrop_path": "/qRwkMMZhQRKM4uDaXpd2XbZZmkE.jpg",
            "genre_ids": [
                18
            ],
            "id": 85350,
            "original_language": "en",
            "original_title": "Boyhood",
            "overview": "The film tells a story of a divorced couple trying to raise their young son. The story follows the boy for twelve years, from first grade at age 6 through 12th grade at age 17-18, and examines his relationship with his parents as he grows.",
            "popularity": 182.3,
            "poster_path": "/2BvtvDUyxiMJ4dmKfiQf4qdOHQN.jpg",
            "release_date": "2014-06-05",
            "title": "Boyhood",
            "video": false,
            "vote_average": 7.505,
            "vote_count": 5007
        },
        {
            "adult": false,
            "backdrop_path": "/v4kcnmWdu8AmNncx4WmBn05JotZ.jpg",
            "genre_ids": [
                9648,
                53,
                28
            ],
            "id": 241848,
            "original_language": "en",
            "original_title": "The Guest",
            "overview": "A soldier introduces himself to the Peterson family, claiming to be a friend of their son who died in action. After the young man is welcomed into their home, a series of accidental deaths seem to be connected to his presence.",
            "popularity": 142.056,
            "poster_path": "/6zyl8uGWYjcCb8CJVMk7BZK0SfU.jpg",
            "release_date": "2014-09-05",
            "title": "The Guest",
            "video": false,
            "vote_average": 6.652,
            "vote_count": 1869
        },
        {
            "adult": false,
            "backdrop_path": "/bQSfsZDaBWZCHI8Z2nrN1hkR6EG.jpg",
            "genre_ids": [
                35,
                27
            ],
            "id": 246403,
            "original_language": "en",
            "original_title": "Tusk",
            "overview": "When his best friend and podcast co-host goes missing in the backwoods of Canada, a young guy joins forces with his friend's girlfriend to search for him.",
            "popularity": 139.952,
            "poster_path": "/pA2SgITmH0lzet9Nn5cxeinRKMv.jpg",
            "release_date": "2014-09-19",
            "title": "Tusk",
            "video": false,
            "vote_average": 5.468,
            "vote_count": 1327
        },
        {
            "adult": false,
            "backdrop_path": "/eTlcNXGv32zkVI7ZDHhfeaKHXKQ.jpg",
            "genre_ids": [
                28,
                9648,
                878,
                53
            ],
            "id": 198663,
            "original_language": "en",
            "original_title": "The Maze Runner",
            "overview": "Set in a post-apocalyptic world, young Thomas is deposited in a community of boys after his memory is erased, soon learning they're all trapped in a maze that will require him to join forces with fellow “runners” for a shot at escape.",
            "popularity": 137.873,
            "poster_path": "/ode14q7WtDugFDp78fo9lCsmay9.jpg",
            "release_date": "2014-09-10",
            "title": "The Maze Runner",
            "video": false,
            "vote_average": 7.182,
            "vote_count": 16530
        },
        {
            "adult": false,
            "backdrop_path": "/bVmSXNgH1gpHYTDyF9Q826YwJT5.jpg",
            "genre_ids": [
                28,
                12,
                14
            ],
            "id": 122917,
            "original_language": "en",
            "original_title": "The Hobbit: The Battle of the Five Armies",
            "overview": "Immediately after the events of The Desolation of Smaug, Bilbo and the dwarves try to defend Erebor's mountain of treasure from others who claim it: the men of the ruined Laketown and the elves of Mirkwood. Meanwhile an army of Orcs led by Azog the Defiler is marching on Erebor, fueled by the rise of the dark lord Sauron. Dwarves, elves and men must unite, and the hope for Middle-Earth falls into Bilbo's hands.",
            "popularity": 131.278,
            "poster_path": "/xT98tLqatZPQApyRmlPL12LtiWp.jpg",
            "release_date": "2014-12-10",
            "title": "The Hobbit: The Battle of the Five Armies",
            "video": false,
            "vote_average": 7.317,
            "vote_count": 13836
        },
    ],
}


// const sort_release_date = (data) => {
//     let response = { result: [], set: {} }
//     let _prev
//     data.map((v, i) => {
//         debugger
//         if (!_prev) {
//             v["isYearPresent"] = new Date(v['release_date']).getFullYear()
//         } else {
//             let _dateFormat = new Date(v['release_date']);
//             let _splitDate = _prev['release_date'].split("-")
//             if(_splitDate[0]!= _dateFormat.getFullYear()){
//                 v["isYearPresent"] = _dateFormat.getFullYear()
//             }
//         }
//         _prev = data[i]
//     })
//     return data;
// }


// let response = { result: [], set: {}, stickeyIndex: [] }
//     let _prev = "";
//     let blankBlock = [0, 0]
//     data.map((v:any, i:number) => {
//         debugger
//         if (!_prev) {
//             v["isYearPresent"] = new Date(v['release_date']).getFullYear()
//             response.stickeyIndex.push(0)
//         } else {
//             let _dateFormat = new Date(v['release_date']);
//             let _splitDate = _prev['release_date'].split("-")
//             if (_splitDate[0] != _dateFormat.getFullYear()) {
//                 v["isYearPresent"] = _dateFormat.getFullYear()
//                 response.result.push({ isYearPresent: true })
//                 response.stickeyIndex.push(i)
//             }
//         }
//         _prev = data[i]
//     })
//     return { data, sticky: response.stickeyIndex };

export const sort_release_date = (_data: any[]) => {

    let state = store.getState().movieApp
    let _finalResult: any[] = [];
    let _prevRecord;
    let stickeyIndex = []

    for (let index = 0; index < _data.length; index++) {
        let _currentYear = new Date(_data[index].release_date).getFullYear()
        if (!_prevRecord) {
            _finalResult.push({ isYearFilterPresent: true, year: _currentYear })
            stickeyIndex.push(index)
        } else {
            let _prevRecordYear = new Date(_prevRecord.release_date).getFullYear();
            if (_currentYear != _prevRecordYear) {
                _finalResult.push({ isYearFilterPresent: true, year: _currentYear })
                stickeyIndex.push(index+2)
            }
        }
        _finalResult.push(_data[index])
        _prevRecord = _data[index]
    }
    return { data: _finalResult, stickeyHeaderIndex: stickeyIndex, filter: {} }
}



sort_release_date(data_data.results)


// console.log(JSON.stringify(sort_release_date(data.results)))
// sort_release_date(data.results)